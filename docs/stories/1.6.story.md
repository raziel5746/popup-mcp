# Story 1.6: Add Status Bar Indicator

## Status
Approved

## Story
**As a** user,  
**I want** a status bar icon showing MCP status with hover details and chime mute button,  
**so that** I can monitor and control the extension easily.

## Acceptance Criteria
1: Displays icon for MCP role and connection status.  
2: Hover shows detailed text information.  
3: Includes button to toggle chime mute/unmute.  
4: Persists across sessions via local storage if needed.

## Tasks / Subtasks
- [ ] Implement StatusBar component (AC: 1, 2) [Source: architecture/components.md#status-bar-manager]  
  - [ ] Create src/components/StatusBar.ts using VS Code StatusBarItem  
  - [ ] Update icon and tooltip based on StatusState enum  
- [ ] Add chime toggle functionality (AC: 3)  
  - [ ] Register command for toggle  
  - [ ] Update ExtensionConfig and persist with Workspace State  
- [ ] Ensure persistence (AC: 4) [Source: architecture/frontend-architecture.md#state-management-architecture]  
  - [ ] Load/save state on activation/deactivation  
- [ ] Integrate with overall extension (AC: all)  
  - [ ] Update in response to server events  
- [ ] Write unit tests (AC: all) [Source: architecture/testing-strategy.md#frontend-tests]  
  - [ ] Test status updates, hover, and toggle in tests/unit/components/StatusBar.test.ts  

## Dev Notes
- **Previous Story Insights**: Use state from prior configs; no specific dev notes.  
- **Data Models**: Use StatusState enum and ExtensionConfig for chime. [Source: architecture/data-models.md#statusstate] [Source: architecture/data-models.md#extensionconfig]  
- **API Specifications**: N/A - Internal status management.  
- **Component Specifications**: StatusBarManager with updateStatus() and toggleChime(). [Source: architecture/components.md#status-bar-manager]  
- **File Locations**: src/components/StatusBar.ts. [Source: architecture/unified-project-structure.md]  
- **Testing Requirements**: Jest for unit testing status logic. [Source: architecture/testing-strategy.md#frontend-tests]  
- **Technical Constraints**: VS Code Window API for status bar; persist with Memento. [Source: architecture/tech-stack.md#state-management]  

**Project Structure Notes**: Fits component structure; no issues.

### Testing
- Test file location: tests/unit/components/StatusBar.test.ts. [Source: architecture/testing-strategy.md#frontend-tests]  
- Test standards: Unit focus in pyramid. [Source: architecture/testing-strategy.md#testing-pyramid]  
- Testing frameworks and patterns: Jest for state changes. [Source: architecture/testing-strategy.md#frontend-component-test]  
- Any specific testing requirements for this story: Test icon updates, hover, toggle, persistence.

## Change Log
| Date | Version | Description | Author |  
|------|---------|-------------|--------|  

## Dev Agent Record
### Agent Model Used  

### Debug Log References  

### Completion Notes List  

### File List  

## QA Results
