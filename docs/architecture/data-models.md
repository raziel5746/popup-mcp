# Data Models

## PopupRequest
**Purpose:** Represents incoming MCP requests from AI assistants to trigger popups, including routing info.

**Key Attributes:**
- requestId: string - Unique identifier generated by MCP Server for tracking.
- workspacePath: string - Path for routing to correct VS Code instance.
- title: string - Popup title.
- message: string - Main content.
- options: Array<{label: string, value: string}> - Button choices.

**TypeScript Interface**
```typescript
interface PopupRequest {
  requestId: string;
  workspacePath: string;
  title: string;
  message: string;
  options: Array<{ label: string; value: string }>;
}
```

**Relationships**
- Sent from AI to MCP Server (which adds requestId); used by Target Instance to render Popup.

## PopupResponse
**Purpose:** Captures user input from popup for routing back to AI.

**Key Attributes:**
- requestId: string - Matches original request.
- selectedValue: string - Button value or custom text.

**TypeScript Interface**
```typescript
interface PopupResponse {
  requestId: string;
  selectedValue: string;
}
```

**Relationships**
- Generated by Target Instance; routed through MCP Server to AI.

## ExtensionConfig
**Purpose:** Stores user preferences like chime settings.

**Key Attributes:**
- chimeEnabled: boolean - Toggle for popup sound.
- popupTimeout: number - Auto-dismiss time in seconds.
- themePreference: string - Optional theme (e.g., 'light', 'dark').

**TypeScript Interface**
```typescript
interface ExtensionConfig {
  chimeEnabled: boolean;
  popupTimeout: number;
  themePreference: string;
}
```

**Relationships**
- Persisted via VS Code Workspace State; accessed across instances.

## StatusState
**Purpose:** Enum for status bar states, ensuring type-safe handling of MCP roles and connections.

**TypeScript Interface**
```typescript
enum StatusState {
  ServerActive = 'server-active',
  ClientActive = 'client-active',
  Disconnected = 'disconnected',
  Error = 'error'
}
```

**Relationships**
- Used in status bar logic; ties to overall extension state.
